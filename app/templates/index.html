{% extends "base.html" %}

{% block title %}Grozsery - Home{% endblock %}

{% block content %}
    <div class="stats-card">
        <h2>Statistics</h2>
        <p>Total Items: {{ total_items }}</p>
    </div>

    <div class="search-container">
        <h2>Search Items</h2>
        <form id="search-form" class="search-form">
            <input type="text" id="search-query" class="search-input" 
                   placeholder="Search for items..." required>
            <button type="submit" class="btn btn-primary">Search</button>
        </form>
    </div>

    <div class="actions-container">
        <a href="{{ url_for('main.scrape') }}" class="btn btn-primary">
            Scrape Maxima Data
        </a>
        <a href="{{ url_for('main.scrape_rimi') }}" class="btn btn-primary">
            Scrape Rimi Data
        </a>
        <a href="{{ url_for('main.categorize_maxima') }}" class="btn btn-primary">
            Categorize Items
        </a>
    </div>

    <div id="search-results"></div>

    <script>
    document.getElementById('search-form').addEventListener('submit', function(event) {
        event.preventDefault();
        const query = document.getElementById('search-query').value;
        fetch(`{{ url_for('main.search') }}?query=${query}`)
            .then(response => response.text())
            .then(data => {
                document.getElementById('search-results').innerHTML = data;
            });
    });
    </script>
{% endblock %}